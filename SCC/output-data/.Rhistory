library(readr)
df <- read_delim("C:/Users/Ruben/Downloads/metadata/metadata/1870-1880.csv",
"\t", escape_double = FALSE, trim_ws = TRUE)
View(df)
df$image_url[1]
rect(56, 83, 1552, 5424)
plot(c(0, 1496), c(0, 5341), type= "n", xlab = "", ylab = "")
rect(56, 83, 1552, 5424)
df$paper_title[5]
df_ar = df[df$paper_title == "De TÄ³d : godsdienstig-staatkundig dagblad",]
df_t = df[df$paper_title == "De TÄ³d : godsdienstig-staatkundig dagblad",]
View(df_t)
mean(df_t$w)
plot(c(0, mean(df_t$w)), c(0, mean(df_t$h)), type= "n", xlab = "", ylab = "")
rect(df_t$min_x[i],df_t$min_y[i],df_t$max_x[i],df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1))
df_t$min_x[3]
print(i)
length(df_t)
for(i in seq(1,nrow(df_t))){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1))
}
plot(c(0, max(df_t$w)), c(0, max(df_t$h)), type= "n", xlab = "", ylab = "")
for(i in seq(1,nrow(df_t))){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1))
}
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
for(i in seq(1,nrow(df_t))){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
}
plot(c(0, max(df_t$h)), c(0, max(df_t$w)), type= "n", xlab = "", ylab = "")
plot(c(0, mean(df_t$h)), c(0, mean(df_t$w)), type= "n", xlab = "", ylab = "")
mean(df_t$h)
mean(df_t$w)
plot( c(0, mean(df_t$w)), c(0, mean(df_t$h)), type= "n", xlab = "", ylab = "")
i = 1
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
i = 123
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
plot( c(0, mean(df_t$w)), c(0, mean(df_t$h)), type= "n", xlab = "", ylab = "")
i = 33
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
df_t$image_url[4]
rect(0, 0, df_t$w[i], df_t$h[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
rect(0, 0, df_t$w[4], df_t$h[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
rect(df_t$min_x[4], df_t$min_y[4], df_t$max_x[4], df_t$max_y[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
plot( c(0, max(df_t$w)), c(0, max(df_t$h)), type= "n", xlab = "", ylab = "")
rect(0, 0, df_t$w[4], df_t$h[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
rect(0, 0, 3819, 5502, col= rgb(0,0,1.0,alpha=0.1), border=F)
plot(c(0, 3819),c(0,5502), col= rgb(0,0,1.0,alpha=0.1), border=F)
plot(c(0, 3819), c(0,5502), type= "n", xlab = "", ylab = "")
rect(df_t$min_x[4], df_t$min_y[4], df_t$max_x[4], df_t$max_y[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
tot_w = 3819
tot_h = 5502
plot(c(0, tot_w), c(0,tot_h), type= "n", xlab = "", ylab = "")
df_t[]
df_t[4]
df_t[4,]
rect(tot_w - df_t$min_x[4]), tot_w - df_t$min_y[4], tot_w - df_t$max_x[4], tot_w - df_t$max_y[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
rect(tot_w - df_t$min_x[4], tot_w - df_t$min_y[4], tot_w - df_t$max_x[4], tot_w - df_t$max_y[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
df_t = df_t[df_t$page_id == df_t$page_id[1],]
plot( c(0, max(df_t$w)), c(0, max(df_t$h)), type= "n", xlab = "", ylab = "")
for(i in 1:6){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
}
?text
df_t$ocr[1][0:3]
for(i in 1:6){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
text(df_t$max_x[i], df_t$max_y[i], labels = paste(i))
}
plot( c(0, max(df_t$w)), c(0, max(df_t$h)), type= "n", xlab = "", ylab = "")
for(i in 1:6){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
text(df_t$max_x[i], df_t$max_y[i], labels = paste(i))
}
for(i in 1:6){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
}
plot( c(0, max(df_t$w)), c(0, max(df_t$h)), type= "n", xlab = "", ylab = "")
for(i in 1:6){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
}
length(unique(df$issue_id))
length(df$issue_id)
print(length(issue_ss))
for(issue in df$issue_id){
issue_ss = df[df$issue_id == issue]
print(length(issue_ss))
}
for(issue in df$issue_id){
issue_ss = df[df$issue_id == issue,]
print(length(issue_ss))
}
for(issue in df$issue_id){
issue_ss = df[df$issue_id == issue,]
print(issue)
}
unique(issue_id)
unique(df$issue_id)
for(issue in unique(df$issue_id)){
issue_ss = df[df$issue_id == issue,]
print(issue)
}
t = c(0,3,5,1,4)
which.min(t)
smallest = data.frame(matrix(0,0,2))
for(issue in unique(df$issue_id)){
issue_ss = df[df$issue_id == issue,]
dim_articles = c()
for(art_no in 1:length(issue_ss)){
dim = issue_ss$w * issue_ss$h
dim_articles = c(dim_articles, dim)
article_id = issue_ss$id[which.min(dim_articles),]
tmp = c(issue, article_id)
smallest = rbind(smallest, tmp)
}
}
for(issue in unique(df$issue_id)){
issue_ss = df[df$issue_id == issue,]
dim_articles = c()
for(art_no in 1:length(issue_ss)){
dim = issue_ss$w * issue_ss$h
dim_articles = c(dim_articles, dim)
article_id = issue_ss$id[which.min(dim_articles)]
tmp = c(issue, article_id)
smallest = rbind(smallest, tmp)
}
}
View(smallest)
list_issues = c()
list_artid = c()
for(issue in unique(df$issue_id)){
issue_ss = df[df$issue_id == issue,]
dim_articles = c()
for(art_no in 1:length(issue_ss)){
dim = issue_ss$w * issue_ss$h
dim_articles = c(dim_articles, dim)
article_id = issue_ss$id[which.min(dim_articles)]
list_issues = c(list_issues, issue)
list_artid = c(list_artid, article_id)
}
}
data.frame(list_issues, list_artid)
smallest = data.frame(list_issues, list_artid)
View(smallest)
smallest[!duplicated(smallest),]
smallest = smallest[!duplicated(smallest),]
View(smallest)
View(df)
df$image_url
smallest$img_url = ""
list_img_urls = c()
for(id in smallest$list_artid){
tmp = df[df$id == id,]
tmp = tmp$image_url[1]
list_img_urls = c(list_img_urls, tmp)
}
smallest$img_url = list_img_urls
View(smallest)
smallest$img_url
write_csv(smallest, "smal_ads.csv", sep = ',')
write_csv(smallest, "smal_ads.csv")
getwd()
smallest[0:10]
smallest$img_url[0:10]
library(readr)
df <- read_csv("GitHub/TheForeign/SCC/output-data/ocr_measurements.csv")
View(df)
library(ggplot2)
ggplot(df, aes(x=year,y=alt_rel_to_total_buit)) + geom_bar(stat='identity')
View(df)
ggplot(df, aes(x=year,y=rel_characters)) + geom_bar(stat='identity')
ggplot(df, aes(x=year,y=alt_rel_to_total_buit)) + geom_bar(stat='identity')
View(df)
library(ggplot2)
library(reshape2)
library(dplyr)
library(tidyverse)
setwd("~/GitHub/TheForeign/SCC/output-data")
get_creativity <- function(file_name, start_year, end_year, csv_delimiter){
df <- read.csv(file_name, sep = csv_delimiter)
rownames(df) <- df[,1]
df <- df[,-1]
df[is.na(df)] <- FALSE
df[df == 0] <- FALSE
df[df > 0] <- TRUE
df$first <- colnames(df)[ifelse(rowSums(df)==0, NA, max.col(df, "first"))]
crdf <- as.data.frame(rownames(df))
crdf[,2] <- df$first
crdf$id <- rownames(crdf)
colnames(crdf) <- c("ngram", "years")
output <- group_by(crdf, years)
colnames(crdf) <- c("ngram", "years", "id")
output <- spread(crdf, years, ngram)
output <- output[,-1]
output <- data.frame(lapply(output, as.character), stringsAsFactors=FALSE)
output[is.na(output)] <- 0
sums <- as.data.frame(colSums(output != 0))
sums$years <- as.numeric(gsub("X","", rownames(sums)))
colnames(sums) <- c("count","years")
sums$id <- paste0("crea_", substr(file_name, 7,8))
sums$years <- as.numeric(sums$years)
sums <- sums[sums$year <= end_year & sums$years >= start_year,]
return(sums)
}
get_creativity('bigrams_buitenlandsche.csv', csv_delimiter = ',', start_year = 1815, end_year = 1914)
df_crea = get_creativity('bigrams_buitenlandsche.csv', csv_delimiter = ',', start_year = 1815, end_year = 1914)
View(df_crea)
ggplot(df_crea, aes(x=years,y=count)) + geom_bar(stat = 'identity')
df_crea = get_creativity('bigrams_internationale.csv', csv_delimiter = ',', start_year = 1840, end_year = 1914)
ggplot(df_crea, aes(x=years,y=count)) + geom_bar(stat = 'identity')
df_crea = get_creativity('bigrams_binnenlandsche.csv', csv_delimiter = ',', start_year = 1840, end_year = 1914)
ggplot(df_crea, aes(x=years,y=count)) + geom_bar(stat = 'identity')
df_crea = get_creativity('bigrams_binnenlandsche.csv', csv_delimiter = ',', start_year = 1815, end_year = 1914)
ggplot(df_crea, aes(x=years,y=count)) + geom_bar(stat = 'identity')
d_ne <- get_durability("bigrams_buitenlandsche.csv", 1815,1914, ",", "yes")
get_durability <- function(file_name, start_year, end_year, csv_delimiter, plot_or_not){
df <- read.csv(file_name, sep = csv_delimiter)
rownames(df) <- df[,1]
df <- df[,-1]
df[is.na(df)] <- FALSE
df[df == 0] <- FALSE
df[df > 0] <- TRUE
df$first <- colnames(df)[ifelse(rowSums(df)==0, NA, max.col(df, "first"))]
df$bigram <- row.names(df)
# Get no. of years in which bigram occurs after introduction
df$nylength <- ""
for(i in seq(1,as.numeric(nrow(df)),1)){
bigram_name <- df$bigram[i]
first_year <- df$first[i]
if(first_year != colnames(df)[as.numeric(ncol(df) - 2)]){
df_bg <- df[df$bigram == bigram_name,]
col_year <- match(first_year,colnames(df))
df_bg <- df_bg[col_year:as.numeric(ncol(df) - 2)]
total_span <- as.numeric(ncol(df_bg) - 1)
df_bg <- as.data.frame(df_bg[df_bg != 0])
nylength <- nrow(df_bg) - 1
df$nylength[i] <- nylength / total_span * 100
} else {df$nylength[i] <- 0}
}
dfs <- df[,c(as.numeric(ncol(df) - 1),as.numeric(ncol(df) - 2),as.numeric(ncol(df)))]
dfs$first <- as.numeric(gsub("X", "", dfs$first))
dfs$nylength <- as.numeric(dfs$nylength)
dfs_bu <- dfs
dfs <- dfs %>%
group_by(first) %>%
dplyr::summarize(score = mean(nylength))
yearsm <- data.frame(matrix(0,0,1))
for(i in seq(1,length(dfs$first),1)){
yr <- dfs$first[i]
no <- length(which(dfs_bu$first == yr))
yearsm <- rbind(yearsm, as.data.frame(no))
}
dfs$score <- dfs$score / yearsm$no
if(plot_or_not == "yes"){
p <- ggplot2::ggplot(data = dfs, aes(x = first, y = score)) +
geom_line() +
scale_x_continuous(limits = c(start_year, end_year), expand = c(0,0), breaks = round(seq(start_year, end_year,10),1)) +
scale_y_continuous(limits = c(0, (max(dfs$score))), expand = c(0,0)) +
ggtitle(paste0("Average Bigram Persistence Score for ", substr(file_name, 7,8),  " Bigrams"))
return(p)
}
if(plot_or_not == "no"){
dfs$id <- substr(file_name, 7,8)
dfs <- dfs[dfs$first <= end_year & dfs$first >= start_year,]
return(dfs)
}
}
d_ne <- get_durability("bigrams_buitenlandsche.csv", 1815,1914, ",", "yes")
View(d_ne)
d_ne
df = read.csv('bigrams_buitenlandsche.csv')
View(df)
df_crea = get_creativity('bigrams_buitenlandsche.csv', csv_delimiter = ',', start_year = 1815, end_year = 1914)
ggplot(df_crea, aes(x=years,y=count)) + geom_bar(stat = 'identity')
