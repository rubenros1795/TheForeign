library(readr)
df <- read_delim("C:/Users/Ruben/Downloads/metadata/metadata/1870-1880.csv",
"\t", escape_double = FALSE, trim_ws = TRUE)
View(df)
df$image_url[1]
rect(56, 83, 1552, 5424)
plot(c(0, 1496), c(0, 5341), type= "n", xlab = "", ylab = "")
rect(56, 83, 1552, 5424)
df$paper_title[5]
df_ar = df[df$paper_title == "De Tĳd : godsdienstig-staatkundig dagblad",]
df_t = df[df$paper_title == "De Tĳd : godsdienstig-staatkundig dagblad",]
View(df_t)
mean(df_t$w)
plot(c(0, mean(df_t$w)), c(0, mean(df_t$h)), type= "n", xlab = "", ylab = "")
rect(df_t$min_x[i],df_t$min_y[i],df_t$max_x[i],df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1))
df_t$min_x[3]
print(i)
length(df_t)
for(i in seq(1,nrow(df_t))){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1))
}
plot(c(0, max(df_t$w)), c(0, max(df_t$h)), type= "n", xlab = "", ylab = "")
for(i in seq(1,nrow(df_t))){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1))
}
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
for(i in seq(1,nrow(df_t))){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
}
plot(c(0, max(df_t$h)), c(0, max(df_t$w)), type= "n", xlab = "", ylab = "")
plot(c(0, mean(df_t$h)), c(0, mean(df_t$w)), type= "n", xlab = "", ylab = "")
mean(df_t$h)
mean(df_t$w)
plot( c(0, mean(df_t$w)), c(0, mean(df_t$h)), type= "n", xlab = "", ylab = "")
i = 1
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
i = 123
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
plot( c(0, mean(df_t$w)), c(0, mean(df_t$h)), type= "n", xlab = "", ylab = "")
i = 33
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
df_t$image_url[4]
rect(0, 0, df_t$w[i], df_t$h[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
rect(0, 0, df_t$w[4], df_t$h[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
rect(df_t$min_x[4], df_t$min_y[4], df_t$max_x[4], df_t$max_y[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
plot( c(0, max(df_t$w)), c(0, max(df_t$h)), type= "n", xlab = "", ylab = "")
rect(0, 0, df_t$w[4], df_t$h[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
rect(0, 0, 3819, 5502, col= rgb(0,0,1.0,alpha=0.1), border=F)
plot(c(0, 3819),c(0,5502), col= rgb(0,0,1.0,alpha=0.1), border=F)
plot(c(0, 3819), c(0,5502), type= "n", xlab = "", ylab = "")
rect(df_t$min_x[4], df_t$min_y[4], df_t$max_x[4], df_t$max_y[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
tot_w = 3819
tot_h = 5502
plot(c(0, tot_w), c(0,tot_h), type= "n", xlab = "", ylab = "")
df_t[]
df_t[4]
df_t[4,]
rect(tot_w - df_t$min_x[4]), tot_w - df_t$min_y[4], tot_w - df_t$max_x[4], tot_w - df_t$max_y[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
rect(tot_w - df_t$min_x[4], tot_w - df_t$min_y[4], tot_w - df_t$max_x[4], tot_w - df_t$max_y[4], col= rgb(0,0,1.0,alpha=0.1), border=F)
df_t = df_t[df_t$page_id == df_t$page_id[1],]
plot( c(0, max(df_t$w)), c(0, max(df_t$h)), type= "n", xlab = "", ylab = "")
for(i in 1:6){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
}
?text
df_t$ocr[1][0:3]
for(i in 1:6){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
text(df_t$max_x[i], df_t$max_y[i], labels = paste(i))
}
plot( c(0, max(df_t$w)), c(0, max(df_t$h)), type= "n", xlab = "", ylab = "")
for(i in 1:6){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
text(df_t$max_x[i], df_t$max_y[i], labels = paste(i))
}
for(i in 1:6){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
}
plot( c(0, max(df_t$w)), c(0, max(df_t$h)), type= "n", xlab = "", ylab = "")
for(i in 1:6){
rect(df_t$min_x[i], df_t$min_y[i], df_t$max_x[i], df_t$max_y[i], col= rgb(0,0,1.0,alpha=0.1), border=F)
}
length(unique(df$issue_id))
length(df$issue_id)
print(length(issue_ss))
for(issue in df$issue_id){
issue_ss = df[df$issue_id == issue]
print(length(issue_ss))
}
for(issue in df$issue_id){
issue_ss = df[df$issue_id == issue,]
print(length(issue_ss))
}
for(issue in df$issue_id){
issue_ss = df[df$issue_id == issue,]
print(issue)
}
unique(issue_id)
unique(df$issue_id)
for(issue in unique(df$issue_id)){
issue_ss = df[df$issue_id == issue,]
print(issue)
}
t = c(0,3,5,1,4)
which.min(t)
smallest = data.frame(matrix(0,0,2))
for(issue in unique(df$issue_id)){
issue_ss = df[df$issue_id == issue,]
dim_articles = c()
for(art_no in 1:length(issue_ss)){
dim = issue_ss$w * issue_ss$h
dim_articles = c(dim_articles, dim)
article_id = issue_ss$id[which.min(dim_articles),]
tmp = c(issue, article_id)
smallest = rbind(smallest, tmp)
}
}
for(issue in unique(df$issue_id)){
issue_ss = df[df$issue_id == issue,]
dim_articles = c()
for(art_no in 1:length(issue_ss)){
dim = issue_ss$w * issue_ss$h
dim_articles = c(dim_articles, dim)
article_id = issue_ss$id[which.min(dim_articles)]
tmp = c(issue, article_id)
smallest = rbind(smallest, tmp)
}
}
View(smallest)
list_issues = c()
list_artid = c()
for(issue in unique(df$issue_id)){
issue_ss = df[df$issue_id == issue,]
dim_articles = c()
for(art_no in 1:length(issue_ss)){
dim = issue_ss$w * issue_ss$h
dim_articles = c(dim_articles, dim)
article_id = issue_ss$id[which.min(dim_articles)]
list_issues = c(list_issues, issue)
list_artid = c(list_artid, article_id)
}
}
data.frame(list_issues, list_artid)
smallest = data.frame(list_issues, list_artid)
View(smallest)
smallest[!duplicated(smallest),]
smallest = smallest[!duplicated(smallest),]
View(smallest)
View(df)
df$image_url
smallest$img_url = ""
list_img_urls = c()
for(id in smallest$list_artid){
tmp = df[df$id == id,]
tmp = tmp$image_url[1]
list_img_urls = c(list_img_urls, tmp)
}
smallest$img_url = list_img_urls
View(smallest)
smallest$img_url
write_csv(smallest, "smal_ads.csv", sep = ',')
write_csv(smallest, "smal_ads.csv")
getwd()
smallest[0:10]
smallest$img_url[0:10]
setwd("~/GitHub/TheForeign/SCC/output-data")
library(readr)
bigrams_buitenlandsche <- read_csv("bigrams_buitenlandsche.csv")
View(bigrams_buitenlandsche)
df = bigrams_buitenlandsche
library(reshape1)
library(reshape2)
dfm = melt(df, id.vars = 'ngram')
View(dfm)
dfm$variable = as.numeric(dfm$variable)
dfm$variable = dfm$variable - dfm$variable %% 10
dfm$value = as.numeric(dfm$value)
View(dfm)
df = bigrams_buitenlandsche
dfm = melt(df, id.vars = 'ngram')
dfm$variable = as.numeric(as.character(dfm$variable))
dfm$value = as.numeric(as.character(dfm$value))
dfm$variable = dfm$variable - dfm$variable %% 10
df = dcast(dfm, ngram ~ variable, value.var = 'value')
df = bigrams_buitenlandsche
dfm = melt(df, id.vars = 'ngram')
dfm$variable = as.numeric(as.character(dfm$variable))
dfm$value = as.numeric(as.character(dfm$value))
dfm$variable = dfm$variable - dfm$variable %% 10
df = dcast(dfm, ngram ~ variable, value.var = 'value', fun.aggregate = sum)
View(df)
write.csv(df, file = 'bigrams_buitenlandsche_decade.csv')
df = bigrams_buitenlandsche
for(i in 2:101){
tmp_df = df[,c(1,i)]
colnames(tmp_df) = c('ngram', 'year')
tmp_df = tmp_df[tmp_df$year > 0,]
year_char = c()
for(x in 1:as.numeric(nrow(tmp_df))){
ngram = tmp_df$ngram[x]
times = tmp_df$year[x]
tmp = paste(replicate(times, ngram), collapse = " ")
year_char = c(year_char, tmp)
}
}
as.data.frame(year_char)
yearly = c()
for(i in 2:101){
tmp_df = df[,c(1,i)]
colnames(tmp_df) = c('ngram', 'year')
tmp_df = tmp_df[tmp_df$year > 0,]
year_char = c()
for(x in 1:as.numeric(nrow(tmp_df))){
ngram = tmp_df$ngram[x]
times = tmp_df$year[x]
tmp = paste(replicate(times, ngram), collapse = " ")
year_char = c(year_char, tmp)
}
year_char = paste0(year_char, collapse = " ")
yearly = c(yearly, year_char)
}
dfy = as.data.frame(yearly)
View(dfm)
View(dfy)
library(tm)
corpus = VCorpus(VectorSource(yearly))
dtm = DocumentTermMatrix(corpus, control = list(weighting = weightTfIdf))
dtm
View(dtm)
apply(dtm, 1, function(x) {
x2 <- sort(x, TRUE)
x2[x2 >= x2[3]]
})
apply(dtm, 1, function(x) {
x2 <- sort(x, TRUE)
x2[x2 >= x2[5]]
})
termz = c()
for(i in apply(dtm, 1, function(x) {
x2 <- sort(x, TRUE)
x2[x2 >= x2[3]]
})){
termz = c(termz, i)
}
apply(dtm, 1, function(x) {
x2 <- sort(x, TRUE)
x2[x2 >= x2[3]]
})[1]
class(apply(dtm, 1, function(x) {
x2 <- sort(x, TRUE)
x2[x2 >= x2[3]]
})[1])
apply(dtm, 1, function(x) {
x2 <- sort(x, TRUE)
x2[x2 >= x2[3]]
})[1][[1]]
x = apply(dtm, 1, function(x) {
x2 <- sort(x, TRUE)
x2[x2 >= x2[3]]
})[1][[1]]
